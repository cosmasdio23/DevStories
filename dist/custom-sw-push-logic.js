console.log("[Custom SW Push Logic] File dimuat dan siap menangani push."),self.addEventListener("push",(i=>{console.log("[Service Worker] Push Diterima.");let t="DevStory Notifikasi!",o={body:"Ada cerita baru atau update untuk Anda.",icon:"/assets/icons/icon-192x192.png",badge:"/assets/icons/icon-96x96.png",data:{url:"/"}};if(i.data)try{const e=i.data.json();console.log("[Service Worker] Data Push (JSON): ",e),t=e.title||t,o.body=e.body||o.body,o.icon=e.icon||o.icon,o.badge=e.badge||o.badge,e.data&&e.data.url&&(o.data.url=e.data.url)}catch(t){console.log("[Service Worker] Data Push (Text): ",i.data.text()),o.body=i.data.text()}i.waitUntil(self.registration.showNotification(t,o))})),self.addEventListener("notificationclick",(i=>{console.log("[Service Worker] Notifikasi di-klik."),i.notification.close();const t=i.notification.data.url||"/";i.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((i=>{for(let o=0;o<i.length;o++){const e=i[o];if(new URL(e.url).pathname===new URL(t,self.location.origin).pathname&&"focus"in e)return e.focus()}if(clients.openWindow)return clients.openWindow(new URL(t,self.location.origin).href)})))})),self.addEventListener("notificationclose",(i=>{console.log("[Service Worker] Notifikasi ditutup (bukan diklik).",i.notification)}));